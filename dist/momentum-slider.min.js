!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):t.MomentumSlider=i()}(this,function(){"use strict";function t(t){this.o=function(t){t||(t={});for(var i=1;i<arguments.length;i++)e(t,arguments[i]);return t}({},this.defaults,t),this.initHtml(),this.initValues(),this.initEvents(),this.updateClassnames()}window.addEventListener("touchmove",function(){}),t.prototype={defaults:{el:".ms-container",vertical:!1,multiplier:1,bounceCoefficient:.3,bounceMax:100,loop:0,circular:!1,interactive:!0,currentIndex:0},initHtml:function(){if(this.msContainer=d.str(this.o.el)?document.querySelector(this.o.el):this.o.el,this.o.range){for(var t='<div class="ms-container"><ul class="ms-track">',i=this.o.range[0];i<=this.o.range[1];i++)t+='<li class="ms-slide">'+i+"</li>";t+="</ul></div>";var e=document.createElement("div");e.innerHTML=t,this.msContainer.appendChild(e.firstChild),this.msContainer=this.msContainer.lastChild}if(this.msContainer.classList.add("ms-container--"+(this.o.vertical?"vertical":"horizontal")),this.msTrack=this.msContainer.firstChild,this.msSlides=this.msTrack.children,this.step=this.o.vertical?this.msSlides[0].scrollHeight:this.msSlides[0].scrollWidth,this.sliderLength=this.msSlides.length,this.o.sync&&(this.msTrackSync=this.o.sync.msTrack),this.o.loop){var s,n,r;for(r=document.createDocumentFragment(),s=this.o.loop,n=this.sliderLength-s;s--;)r.appendChild(this.msSlides[n++].cloneNode(!0));for(this.msTrack.insertBefore(r,this.msTrack.firstChild),r=document.createDocumentFragment(),n=s=this.o.loop;s--;)r.appendChild(this.msSlides[n++].cloneNode(!0));this.msTrack.appendChild(r),this.sliderLength+=2*this.o.loop}},initValues:function(){this.boundMin=-this.step*(this.sliderLength-1),this.boundMax=0,this.targetPosition=this.targetPosition||0,this.ticking=!1,this.enabled=!0,this.pointerActive=!1,this.pointerMoved=!1,this.trackingPoints=[],this.msTrack.style[this.o.vertical?"height":"width"]=this.sliderLength*this.step+"px",this.msTrack.style[this.o.vertical?"top":"left"]="calc(50% - "+this.step/2+"px)",this.currentIndex=(this.currentIndex||this.o.currentIndex)+this.o.loop,this.updateSlider(void 0,!0),this.renderTarget();for(var t=this.sliderLength;t--;)this.setStyle(t,this.currentIndex==t?0:-1)},initEvents:function(){this.o.interactive&&(this.msContainer.addEventListener("touchstart",this.onDown.bind(this)),this.msContainer.addEventListener("mousedown",this.onDown.bind(this)),document.addEventListener("touchmove",this.onMove.bind(this),!!s()&&{passive:!1}),document.addEventListener("touchend",this.onUp.bind(this)),document.addEventListener("touchcancel",this.stopTracking.bind(this)),document.addEventListener("mousemove",this.onMove.bind(this),!!s()&&{passive:!1}),document.addEventListener("mouseup",this.onUp.bind(this)),this.o.prevEl&&(this.prevEl=d.str(this.o.prevEl)?document.querySelector(this.o.prevEl):this.o.prevEl,this.prevEl.addEventListener("click",this.prev.bind(this))),this.o.nextEl&&(this.nextEl=d.str(this.o.nextEl)?document.querySelector(this.o.nextEl):this.o.nextEl,this.nextEl.addEventListener("click",this.next.bind(this)))),window.addEventListener("resize",this.onResize.bind(this))},prev:function(){this.enabled&&this.updateSlider(Math.round(this.targetPosition/this.step)*this.step+this.step)},next:function(){this.enabled&&this.updateSlider(Math.round(this.targetPosition/this.step)*this.step-this.step)},getCurrentValue:function(t,i,e){var s=t[0],n=t[1],r=t[2]||s,o=e?n-s:n-r;return e?n-o*i:n+o*i},setStyle:function(t,e,s){var i=this.o.style;if(i){var n,r=this;for(var o in i)"transform"==o?(n="",i[o].forEach(function(t){for(var i in t)n+=i+"("+r.getCurrentValue(t[i],e,s),"rotate"==i?n+="deg":"translateX"!=i&&"translateY"!=i&&"translateZ"!=i||(n+="px"),n+=") "})):n=this.getCurrentValue(i[o],e,s),this.msSlides[t].style[o]=n}},renderTarget:function(){var t=this.sliderLength*this.step,i=this.o.loop*this.step,e=t-2*i;if(this.o.loop)if(-this.targetPosition<i)for(;-this.targetPosition<i;)this.targetPosition-=e;else if(-this.targetPosition>=i+e)for(;-this.targetPosition>=i+e;)this.targetPosition+=e;var s=-this.targetPosition/this.step,n=Math.floor(s),r=Math.ceil(s),o=s-n,h=s-r;d.und(this.lowerIndex)||this.lowerIndex==n||this.lowerIndex==r||this.setStyle(this.lowerIndex,1,!0),d.und(this.higherIndex)||this.higherIndex==n||this.higherIndex==r||this.setStyle(this.higherIndex,-1),0<=n&&n<this.sliderLength&&(this.setStyle(n,o,!0),this.lowerIndex=n),0<=r&&r<this.sliderLength&&(this.setStyle(r,h),this.higherIndex=r);var a="translate"+(this.o.vertical?"Y":"X")+"("+this.targetPosition+"px)";this.msTrack.style[c]=a,this.msTrackSync&&(this.msTrackSync.style[c]=a)},onDown:function(t){if(this.enabled&&!this.pointerActive){var i=n(t);this.pointerActive=!0,this.pointerId=i.id,this.pointerLastX=this.pointerCurrentX=i.x,this.pointerLastY=this.pointerCurrentY=i.y,this.trackingPoints=[],this.addTrackingPoint(this.pointerLastX,this.pointerLastY),this.animateInstance&&this.animateInstance.stop()}},onMove:function(t){if(this.enabled&&this.pointerActive){this.pointerMoved=!0,t.preventDefault();var i=n(t);i.id===this.pointerId&&(this.pointerCurrentX=i.x,this.pointerCurrentY=i.y,this.addTrackingPoint(this.pointerLastX,this.pointerLastY),this.requestTick())}},onUp:function(t){if(this.enabled&&this.pointerActive&&n(t).id===this.pointerId){var i=Array.prototype.indexOf.call(this.msTrack.children,t.target);this.pointerMoved||-1!==i&&(this.currentIndex=i,this.updateSlider()),this.stopTracking(i)}},onResize:function(){},stopTracking:function(t){this.pointerActive=!1,(this.pointerMoved||-1===t)&&(this.pointerMoved=!1,this.addTrackingPoint(this.pointerLastX,this.pointerLastY),this.startDecelAnim())},addTrackingPoint:function(t,i){for(var e=Date.now();0<this.trackingPoints.length&&!(e-this.trackingPoints[0].time<=100);)this.trackingPoints.shift();this.trackingPoints.push({x:t,y:i,time:e})},updateAndRender:function(){var t,i=this.o.vertical?this.pointerCurrentY-this.pointerLastY:this.pointerCurrentX-this.pointerLastX;if(this.targetPosition+=i*this.o.multiplier,this.o.bounceCoefficient){var e=this.checkBounds();0!==e&&(this.targetPosition-=i*(t=e,5e-6*Math.pow(t,2)+1e-4*t+.55)*this.o.multiplier)}else this.checkBounds(!0);this.renderTarget(),this.pointerLastX=this.pointerCurrentX,this.pointerLastY=this.pointerCurrentY,this.ticking=!1},requestTick:function(){this.ticking||requestAnimationFrame(this.updateAndRender.bind(this)),this.ticking=!0},checkBounds:function(t){var i=0;return void 0!==this.boundMin&&this.targetPosition<this.boundMin?i=this.boundMin-this.targetPosition:void 0!==this.boundMax&&this.targetPosition>this.boundMax&&(i=this.boundMax-this.targetPosition),t&&0!==i&&(this.targetPosition=0<i?this.boundMin:this.boundMax),i},startDecelAnim:function(){var t=this.trackingPoints[0],i=this.trackingPoints[this.trackingPoints.length-1],e=this.o.vertical?i.y-t.y:i.x-t.x,s=(i.time-t.time)/15/this.o.multiplier;this.decVel=e/s||0;var n=this.targetPosition+12*this.decVel,r=n%this.step;n-=r,-r>this.step/2&&(n-=this.step),this.updateSlider(n)},fixCurrentIndex:function(){this.o.loop&&(this.currentIndex<this.o.loop?this.currentIndex=this.sliderLength-this.o.loop+(this.currentIndex-this.o.loop):this.currentIndex>this.sliderLength-this.o.loop-1&&(this.currentIndex=this.currentIndex+2*this.o.loop-this.sliderLength))},updateSlider:function(t,i){d.und(t)?t=-this.currentIndex*this.step:this.currentIndex=-t/this.step,this.fixCurrentIndex(),t!==this.targetPosition&&(this.updateClassnames(),this.animateTarget(t,i))},updateClassnames:function(){this.prevEl&&(0===this.currentIndex?this.prevEl.classList.add("ms-first"):this.prevEl.classList.remove("ms-first")),this.nextEl&&(this.currentIndex===this.sliderLength-1?this.nextEl.classList.add("ms-last"):this.nextEl.classList.remove("ms-last"))},animateTarget:function(t,i,e){this.animateInstance&&this.animateInstance.stop();var s=this,n=this.targetPosition,r=t;this.animateInstance=function(e,s,n){{if(s){var r=performance.now(),o=null,h=!1,a=function(t){var i=(t-r)/s;1<i&&(i=1),e(d.und(n)?i:n(i)),1===i||h||(o=requestAnimationFrame(a))};return o=requestAnimationFrame(a),new function(){this.stop=function(){o&&cancelAnimationFrame(o),h=!0}}}e(1)}}(function(t){s.targetPosition=n<r?n+(r-n)*t:n-(n-r)*t;var i=-(s.sliderLength-1)*s.step;!e&&!s.o.loop&&s.o.bounceCoefficient&&(0<s.targetPosition&&s.targetPosition>Math.min(r*s.o.bounceCoefficient,s.o.bounceMax)||s.targetPosition<i&&s.targetPosition<i-Math.min(-(r-i)*s.o.bounceCoefficient,s.o.bounceMax))?(s.animateInstance.stop(),s.animateTarget(0<s.targetPosition?0:i,!1,!0),s.currentIndex=0<s.targetPosition?0:s.sliderLength-1):s.renderTarget()},i?0:500,function(t){return t*(2-t)})},getCurrentIndex:function(){return this.o.loop?this.currentIndex-this.o.loop:this.currentIndex},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var d={arr:function(t){return Array.isArray(t)},str:function(t){return"string"==typeof t},und:function(t){return void 0===t}};var i="transform",c=function(t,i){if(i in t.style)return getComputedStyle(t).getPropertyValue(i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}(document.body,i)?i:"-webkit-"+i;function e(t,i){for(var e in i)t[e]=d.arr(i[e])?i[e].slice(0):i[e];return t}function s(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,i)}catch(t){}return s=function(){return t},t}function n(t){if("touchmove"===t.type||"touchstart"===t.type||"touchend"===t.type){var i=t.targetTouches[0]||t.changedTouches[0];return{x:i.clientX,y:i.clientY,id:i.identifier}}return{x:t.clientX,y:t.clientY,id:null}}return t});